#!/bin/bash

###############################################################################
# Production Startup Script for LAIS Marketplace
# –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –∑–∞–ø—É—Å–∫ –ø—Ä–æ–µ–∫—Ç–∞ –Ω–∞ Arch Linux —Å –ø—Ä–æ–≤–µ—Ä–∫–∞–º–∏
###############################################################################

set -e  # –í—ã—Ö–æ–¥ –ø—Ä–∏ –æ—à–∏–±–∫–µ

# –¶–≤–µ—Ç–∞ –¥–ª—è –≤—ã–≤–æ–¥–∞
RED='\033[0;31m'
GREEN='\033[0;32m'
YELLOW='\033[1;33m'
BLUE='\033[0;34m'
NC='\033[0m' # No Color

# –§—É–Ω–∫—Ü–∏—è –≤—ã–≤–æ–¥–∞ —Å —Ü–≤–µ—Ç–æ–º
print_status() {
    echo -e "${BLUE}[INFO]${NC} $1"
}

print_success() {
    echo -e "${GREEN}[SUCCESS]${NC} $1"
}

print_warning() {
    echo -e "${YELLOW}[WARNING]${NC} $1"
}

print_error() {
    echo -e "${RED}[ERROR]${NC} $1"
}

# –ó–∞–≥–æ–ª–æ–≤–æ–∫
echo "========================================================================"
echo "  üöÄ LAIS Marketplace - Production Deployment"
echo "========================================================================"
echo ""

###############################################################################
# 1. –ü—Ä–æ–≤–µ—Ä–∫–∞ –æ–∫—Ä—É–∂–µ–Ω–∏—è
###############################################################################

print_status "–ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã—Ö –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π..."

# –ü—Ä–æ–≤–µ—Ä–∫–∞ Docker
if ! command -v docker &> /dev/null; then
    print_error "Docker –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω! –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ Docker –∏ –ø–æ–≤—Ç–æ—Ä–∏—Ç–µ –ø–æ–ø—ã—Ç–∫—É."
    exit 1
fi
print_success "Docker —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω: $(docker --version)"

# –ü—Ä–æ–≤–µ—Ä–∫–∞ Docker Compose
if ! command -v docker-compose &> /dev/null; then
    print_error "Docker Compose –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω! –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ docker-compose –∏ –ø–æ–≤—Ç–æ—Ä–∏—Ç–µ –ø–æ–ø—ã—Ç–∫—É."
    exit 1
fi
print_success "Docker Compose —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω: $(docker-compose --version)"

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–∞–≤ Docker
if ! docker ps &> /dev/null; then
    print_error "–ù–µ—Ç –ø—Ä–∞–≤ –¥–ª—è –∑–∞–ø—É—Å–∫–∞ Docker. –í—ã–ø–æ–ª–Ω–∏—Ç–µ: sudo usermod -aG docker $USER"
    exit 1
fi
print_success "Docker –¥–æ—Å—Ç—É–ø–µ–Ω —Ç–µ–∫—É—â–µ–º—É –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é"

###############################################################################
# 2. –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–æ–Ω–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤
###############################################################################

print_status "–ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–æ–Ω–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤..."

# –ü—Ä–æ–≤–µ—Ä–∫–∞ .env
if [ ! -f ".env" ]; then
    print_error "–§–∞–π–ª .env –Ω–µ –Ω–∞–π–¥–µ–Ω!"
    if [ -f ".env.example" ]; then
        print_warning "–ö–æ–ø–∏—Ä—É—é .env.example –≤ .env..."
        cp .env.example .env
        print_warning "–í–ù–ò–ú–ê–ù–ò–ï: –û—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ .env –ø–µ—Ä–µ–¥ –∑–∞–ø—É—Å–∫–æ–º!"
        nano .env
    else
        print_error "–§–∞–π–ª .env.example —Ç–∞–∫–∂–µ –Ω–µ –Ω–∞–π–¥–µ–Ω. –°–æ–∑–¥–∞–π—Ç–µ .env –≤—Ä—É—á–Ω—É—é."
        exit 1
    fi
fi
print_success "–§–∞–π–ª .env –Ω–∞–π–¥–µ–Ω"

# –ü—Ä–æ–≤–µ—Ä–∫–∞ docker-compose.yml
if [ ! -f "docker-compose.yml" ]; then
    print_error "–§–∞–π–ª docker-compose.yml –Ω–µ –Ω–∞–π–¥–µ–Ω!"
    exit 1
fi
print_success "–§–∞–π–ª docker-compose.yml –Ω–∞–π–¥–µ–Ω"

# –ü—Ä–æ–≤–µ—Ä–∫–∞ nginx –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
if [ ! -f "nginx/nginx.conf" ]; then
    print_error "–§–∞–π–ª nginx/nginx.conf –Ω–µ –Ω–∞–π–¥–µ–Ω!"
    exit 1
fi
print_success "–§–∞–π–ª nginx/nginx.conf –Ω–∞–π–¥–µ–Ω"

###############################################################################
# 3. –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è
###############################################################################

print_status "–ü—Ä–æ–≤–µ—Ä–∫–∞ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è..."

# –ó–∞–≥—Ä—É–∑–∫–∞ .env —Å –æ–±—Ä–∞–±–æ—Ç–∫–æ–π Windows line endings
set -a
while IFS= read -r line; do
    # –£–¥–∞–ª—è–µ–º \r (Windows line ending)
    line=$(echo "$line" | tr -d '\r')
    # –ü—Ä–æ–ø—É—Å–∫–∞–µ–º –ø—É—Å—Ç—ã–µ —Å—Ç—Ä–æ–∫–∏ –∏ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏
    [[ -z "$line" || "$line" =~ ^[[:space:]]*# ]] && continue
    # –ü—Ä–æ–≤–µ—Ä—è–µ–º, —á—Ç–æ —Å—Ç—Ä–æ–∫–∞ —Å–æ–¥–µ—Ä–∂–∏—Ç =
    [[ ! "$line" =~ = ]] && continue
    # –†–∞–∑–¥–µ–ª—è–µ–º –Ω–∞ key –∏ value
    key=$(echo "$line" | cut -d= -f1 | xargs)
    value=$(echo "$line" | cut -d= -f2- | xargs)
    # –ü—Ä–æ–≤–µ—Ä—è–µ–º, —á—Ç–æ key –Ω–µ –ø—É—Å—Ç–æ–π
    [[ -z "$key" ]] && continue
    # –≠–∫—Å–ø–æ—Ä—Ç–∏—Ä—É–µ–º –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é
    export "$key=$value"
done < .env
set +a

REQUIRED_VARS=(
    "POSTGRES_USER"
    "POSTGRES_PASSWORD"
    "POSTGRES_DB"
    "SECRET_KEY"
)

MISSING_VARS=()
for var in "${REQUIRED_VARS[@]}"; do
    if [ -z "${!var}" ]; then
        MISSING_VARS+=("$var")
    fi
done

if [ ${#MISSING_VARS[@]} -gt 0 ]; then
    print_error "–û—Ç—Å—É—Ç—Å—Ç–≤—É—é—Ç –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –≤ .env:"
    for var in "${MISSING_VARS[@]}"; do
        echo "  - $var"
    done
    print_warning "–û—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ .env –∏ –¥–æ–±–∞–≤—å—Ç–µ –Ω–µ–¥–æ—Å—Ç–∞—é—â–∏–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ"
    exit 1
fi
print_success "–í—Å–µ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã"

###############################################################################
# 4. –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ—Ä—Ç–æ–≤
###############################################################################

print_status "–ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ –ø–æ—Ä—Ç–æ–≤..."

check_port() {
    local port=$1
    if lsof -Pi :$port -sTCP:LISTEN -t >/dev/null 2>&1; then
        return 1
    else
        return 0
    fi
}

# –ü—Ä–æ–≤–µ—Ä—è–µ–º —Ç–æ–ª—å–∫–æ –ø–æ—Ä—Ç 8080 (Docker Nginx –≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏–π –ø–æ—Ä—Ç)
PORTS_TO_CHECK=(8080)
OCCUPIED_PORTS=()

for port in "${PORTS_TO_CHECK[@]}"; do
    if ! check_port $port; then
        OCCUPIED_PORTS+=("$port")
    fi
done

if [ ${#OCCUPIED_PORTS[@]} -gt 0 ]; then
    print_warning "–ü–æ—Ä—Ç 8080 —É–∂–µ –∑–∞–Ω—è—Ç:"
    lsof -i :8080 | grep LISTEN || true
    
    read -p "–ü—Ä–æ–¥–æ–ª–∂–∏—Ç—å? Docker Nginx –º–æ–∂–µ—Ç –Ω–µ –∑–∞–ø—É—Å—Ç–∏—Ç—å—Å—è (y/n): " -n 1 -r
    echo
    if [[ ! $REPLY =~ ^[Yy]$ ]]; then
        print_error "–û—Å—Ç–∞–Ω–æ–≤–∫–∞ —Å–∫—Ä–∏–ø—Ç–∞"
        exit 1
    fi
fi

# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ö–æ—Å—Ç–æ–≤–æ–≥–æ Nginx
if systemctl is-active --quiet nginx 2>/dev/null; then
    print_success "–•–æ—Å—Ç–æ–≤—ã–π Nginx —Ä–∞–±–æ—Ç–∞–µ—Ç"
elif command -v nginx &> /dev/null; then
    print_warning "Nginx —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω –Ω–æ –Ω–µ –∑–∞–ø—É—â–µ–Ω. –ó–∞–ø—É—Å—Ç–∏—Ç–µ: sudo systemctl start nginx"
else
    print_warning "–•–æ—Å—Ç–æ–≤—ã–π Nginx –Ω–µ –Ω–∞–π–¥–µ–Ω. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –¥–ª—è production –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è."
fi

###############################################################################
# 5. –°–æ–∑–¥–∞–Ω–∏–µ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–π
###############################################################################

print_status "–°–æ–∑–¥–∞–Ω–∏–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã—Ö –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–π..."

mkdir -p logs
mkdir -p backups
mkdir -p nginx/ssl

print_success "–î–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ —Å–æ–∑–¥–∞–Ω—ã"

###############################################################################
# 6. –û—Å—Ç–∞–Ω–æ–≤–∫–∞ —Å—Ç–∞—Ä—ã—Ö –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤
###############################################################################

print_status "–û—Å—Ç–∞–Ω–æ–≤–∫–∞ —Å—Ç–∞—Ä—ã—Ö –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤ (–µ—Å–ª–∏ –∑–∞–ø—É—â–µ–Ω—ã)..."

if docker-compose ps -q 2>/dev/null | grep -q .; then
    docker-compose down
    print_success "–°—Ç–∞—Ä—ã–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã –æ—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã"
else
    print_status "–ù–µ—Ç –∑–∞–ø—É—â–µ–Ω–Ω—ã—Ö –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤"
fi

###############################################################################
# 7. –û—á–∏—Å—Ç–∫–∞ —Å—Ç–∞—Ä—ã—Ö –æ–±—Ä–∞–∑–æ–≤ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
###############################################################################

read -p "–£–¥–∞–ª–∏—Ç—å —Å—Ç–∞—Ä—ã–µ Docker –æ–±—Ä–∞–∑—ã –ø–µ—Ä–µ–¥ —Å–±–æ—Ä–∫–æ–π? (y/n): " -n 1 -r
echo
if [[ $REPLY =~ ^[Yy]$ ]]; then
    print_status "–£–¥–∞–ª–µ–Ω–∏–µ —Å—Ç–∞—Ä—ã—Ö –æ–±—Ä–∞–∑–æ–≤..."
    docker-compose down --rmi all --volumes --remove-orphans || true
    docker system prune -f
    print_success "–°—Ç–∞—Ä—ã–µ –æ–±—Ä–∞–∑—ã —É–¥–∞–ª–µ–Ω—ã"
fi

###############################################################################
# 8. –°–±–æ—Ä–∫–∞ –∏ –∑–∞–ø—É—Å–∫ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤
###############################################################################

print_status "–°–±–æ—Ä–∫–∞ –∏ –∑–∞–ø—É—Å–∫ Docker –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤..."
print_warning "–≠—Ç–æ –º–æ–∂–µ—Ç –∑–∞–Ω—è—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ –º–∏–Ω—É—Ç –ø—Ä–∏ –ø–µ—Ä–≤–æ–º –∑–∞–ø—É—Å–∫–µ..."

if docker-compose up -d --build; then
    print_success "–ö–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã —É—Å–ø–µ—à–Ω–æ –∑–∞–ø—É—â–µ–Ω—ã!"
else
    print_error "–û—à–∏–±–∫–∞ –ø—Ä–∏ –∑–∞–ø—É—Å–∫–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤"
    print_status "–ü–æ–∫–∞–∑—ã–≤–∞—é –ª–æ–≥–∏:"
    docker-compose logs --tail=50
    exit 1
fi

###############################################################################
# 9. –û–∂–∏–¥–∞–Ω–∏–µ –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏ —Å–µ—Ä–≤–∏—Å–æ–≤
###############################################################################

print_status "–û–∂–∏–¥–∞–Ω–∏–µ –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏ —Å–µ—Ä–≤–∏—Å–æ–≤..."

TIMEOUT=120
ELAPSED=0
INTERVAL=5

while [ $ELAPSED -lt $TIMEOUT ]; do
    # –ü—Ä–æ–≤–µ—Ä–∫–∞ —á—Ç–æ –≤—Å–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã –∑–∞–ø—É—â–µ–Ω—ã
    RUNNING=$(docker-compose ps -q | wc -l)
    TOTAL=$(docker-compose config --services | wc -l)
    
    if [ "$RUNNING" -eq "$TOTAL" ]; then
        print_success "–í—Å–µ —Å–µ—Ä–≤–∏—Å—ã –∑–∞–ø—É—â–µ–Ω—ã ($RUNNING/$TOTAL)"
        break
    fi
    
    echo -n "."
    sleep $INTERVAL
    ELAPSED=$((ELAPSED + INTERVAL))
done

echo ""

if [ $ELAPSED -ge $TIMEOUT ]; then
    print_warning "Timeout –ø—Ä–∏ –∑–∞–ø—É—Å–∫–µ —Å–µ—Ä–≤–∏—Å–æ–≤"
    print_status "–ü—Ä–æ–≤–µ—Ä—è—é —Å—Ç–∞—Ç—É—Å –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤..."
    docker-compose ps
    print_status "–ü–æ–∫–∞–∑—ã–≤–∞—é –ª–æ–≥–∏ –ø—Ä–æ–±–ª–µ–º–Ω—ã—Ö —Å–µ—Ä–≤–∏—Å–æ–≤..."
    docker-compose logs --tail=30
fi

###############################################################################
# 10. –ü—Ä–æ–≤–µ—Ä–∫–∞ –∑–¥–æ—Ä–æ–≤—å—è —Å–µ—Ä–≤–∏—Å–æ–≤
###############################################################################

print_status "–ü—Ä–æ–≤–µ—Ä–∫–∞ –∑–¥–æ—Ä–æ–≤—å—è —Å–µ—Ä–≤–∏—Å–æ–≤..."

# –û–∂–∏–¥–∞–Ω–∏–µ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ –ë–î
sleep 10

# –ü—Ä–æ–≤–µ—Ä–∫–∞ PostgreSQL
print_status "–ü—Ä–æ–≤–µ—Ä–∫–∞ PostgreSQL..."
if docker-compose exec -T postgres pg_isready -U "${POSTGRES_USER}" > /dev/null 2>&1; then
    print_success "PostgreSQL —Ä–∞–±–æ—Ç–∞–µ—Ç"
else
    print_warning "PostgreSQL –Ω–µ –≥–æ—Ç–æ–≤. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏: docker-compose logs postgres"
fi

# –ü—Ä–æ–≤–µ—Ä–∫–∞ Nginx
print_status "–ü—Ä–æ–≤–µ—Ä–∫–∞ Nginx..."
if docker-compose exec -T nginx nginx -t > /dev/null 2>&1; then
    print_success "Nginx –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–∞"
else
    print_error "–û—à–∏–±–∫–∞ –≤ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ Nginx"
    docker-compose exec nginx nginx -t
fi

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ —á–µ—Ä–µ–∑ HTTP
print_status "–ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ —Å–µ—Ä–≤–∏—Å–æ–≤..."
sleep 5

if curl -f http://localhost:80 > /dev/null 2>&1; then
    print_success "–ì–ª–∞–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ –¥–æ—Å—Ç—É–ø–Ω–∞ –Ω–∞ http://localhost:80"
else
    print_warning "–ì–ª–∞–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–∞. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ Nginx."
fi

###############################################################################
# 11. –í—ã–≤–æ–¥ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏
###############################################################################

echo ""
echo "========================================================================"
echo "  ‚úÖ –†–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ –∑–∞–≤–µ—Ä—à–µ–Ω–æ!"
echo "========================================================================"
echo ""

print_status "–°—Ç–∞—Ç—É—Å –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤:"
docker-compose ps

echo ""
print_status "–î–æ—Å—Ç—É–ø–Ω—ã–µ endpoints:"
echo "  - Main Service:  http://localhost:80"
echo "  - Auth API:      http://localhost:80/auth/"
echo "  - Posts API:     http://localhost:80/api/v1/"
echo "  - WebSocket:     ws://localhost:80/ws/"
echo "  - IMEI Checker:  http://localhost:80/imei/"

if [ -n "$DOMAIN" ]; then
    echo ""
    print_status "Production URLs (–ø–æ—Å–ª–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ DNS –∏ SSL):"
    echo "  - Main Service:  https://${DOMAIN}"
    echo "  - Auth API:      https://${DOMAIN}/auth/"
    echo "  - Posts API:     https://${DOMAIN}/api/v1/"
fi

echo ""
print_status "–ü–æ–ª–µ–∑–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã:"
echo "  –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤:       docker-compose logs -f"
echo "  –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤ nginx: docker-compose logs -f nginx"
echo "  –û—Å—Ç–∞–Ω–æ–≤–∫–∞:            docker-compose down"
echo "  –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫:           docker-compose restart"
echo "  –°—Ç–∞—Ç—É—Å:               docker-compose ps"
echo "  –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Ä–µ—Å—É—Ä—Å–æ–≤: docker stats"

echo ""
print_status "–õ–æ–≥–∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω—ã –≤ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏: ./logs"
print_status "–ë—ç–∫–∞–ø—ã –±—É–¥—É—Ç —Ö—Ä–∞–Ω–∏—Ç—å—Å—è –≤: ./backups"

echo ""
print_success "üéâ –ü—Ä–æ–µ–∫—Ç —É—Å–ø–µ—à–Ω–æ –∑–∞–ø—É—â–µ–Ω!"

###############################################################################
# 12. –û—Ç–∫—Ä—ã—Ç—å –ª–æ–≥–∏ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
###############################################################################

read -p "–ü–æ–∫–∞–∑–∞—Ç—å –ª–æ–≥–∏ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏? (y/n): " -n 1 -r
echo
if [[ $REPLY =~ ^[Yy]$ ]]; then
    print_status "–ù–∞–∂–º–∏—Ç–µ Ctrl+C –¥–ª—è –≤—ã—Ö–æ–¥–∞"
    docker-compose logs -f
fi
